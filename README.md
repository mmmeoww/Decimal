# Decimal Library Implementation

Реализация собственной библиотеки decimal.h для работы с десятичными числами высокой точности.

## Содержание

1. [Глава I](#глава-i) \
    1.1. [Информация](#информация)
2. [Глава II](#глава-ii) \
    2.1. [Часть 1](#часть-1-реализация-функций-библиотеки-decimalh)  

## Глава I

## Информация

Тип Decimal представляет десятичные числа в диапазоне от положительных 79,228,162,514,264,337,593,543,950,335 до отрицательных 79,228,162,514,264,337,593,543,950,335. Значение Decimal по умолчанию равно 0. Decimal подходит для финансовых расчетов, которые требуют большого количества значимых целых и дробных цифр и отсутствия ошибок округления. Этот тип не устраняет необходимость округления, но сводит к минимуму количество ошибок из-за него.

Decimal число — это значение с плавающей точкой, состоящее из знака, числового значения (где каждая цифра находится в диапазоне от 0 до 9) и коэффициента масштабирования, который указывает положение десятичной точки, разделяющей целые и дробные части числового значения.

### Двоичное представление

Двоичное представление Decimal состоит из:
- 1-разрядного знака
- 96-разрядного целого числа
- Коэффициента масштабирования, используемого для деления 96-разрядного целого числа

Коэффициент масштабирования неявно равен числу 10, возведенному в степень в диапазоне от 0 до 28.

Decimal число реализуется в виде четырехэлементного массива 32-разрядных целых чисел со знаком (`int bits[4];`):

- `bits[0]`, `bits[1]`, `bits[2]` содержат младшие, средние и старшие 32 бита 96-разрядного целого числа
- `bits[3]` содержит коэффициент масштабирования и знак:
  - Биты 0-15: не используются (должны быть равны нулю)
  - Биты 16-23: показатель степени от 0 до 28 (степень 10 для разделения целого числа)
  - Биты 24-30: не используются (должны быть равны нулю)
  - Бит 31: знак (0 - положительный, 1 - отрицательный)

### Пример структуры:

```c
typedef struct {
    int bits[4];
} decimal;
```

## Глава II

## Часть 1. Реализация функций библиотеки decimal.h

Необходимо реализовать следующие функции библиотеки:

### Арифметические операторы

| Оператор | Функция |
|----------|---------|
| + | `int add(decimal value_1, decimal value_2, decimal *result)` |
| - | `int sub(decimal value_1, decimal value_2, decimal *result)` |
| * | `int mul(decimal value_1, decimal value_2, decimal *result)` |
| / | `int div(decimal value_1, decimal value_2, decimal *result)` |

**Коды возврата:**
- 0 — OK
- 1 — число слишком велико или равно бесконечности
- 2 — число слишком мало или равно отрицательной бесконечности
- 3 — деление на 0

*Примечание:* Для чисел, не вмещающихся в мантиссу, используется банковское округление.

### Операторы сравнения

| Оператор | Функция |
|----------|---------|
| < | `int is_less(decimal, decimal)` |
| <= | `int is_less_or_equal(decimal, decimal)` |
| > | `int is_greater(decimal, decimal)` |
| >= | `int is_greater_or_equal(decimal, decimal)` |
| == | `int is_equal(decimal, decimal)` |
| != | `int is_not_equal(decimal, decimal)` |

**Возвращаемое значение:**
- 0 — FALSE
- 1 — TRUE

### Преобразователи

| Преобразование | Функция |
|----------------|---------|
| int → decimal | `int from_int_to_decimal(int src, decimal *dst)` |
| float → decimal | `int from_float_to_decimal(float src, decimal *dst)` |
| decimal → int | `int from_decimal_to_int(decimal src, int *dst)` |
| decimal → float | `int from_decimal_to_float(decimal src, float *dst)` |

**Коды возврата:**
- 0 — OK
- 1 — ошибка конвертации

### Другие функции

| Функция | Описание |
|---------|----------|
| `int floor(decimal value, decimal *result)` | Округляет до ближайшего целого в сторону отрицательной бесконечности |
| `int round(decimal value, decimal *result)` | Округляет до ближайшего целого числа |
| `int truncate(decimal value, decimal *result)` | Возвращает целую часть числа (дробная часть отбрасывается) |
| `int negate(decimal value, decimal *result)` | Возвращает результат умножения на -1 |

**Коды возврата:**
- 0 — OK
- 1 — ошибка вычисления

### Требования к реализации

- Библиотека должна быть разработана на языке С стандарта C11 с использованием компилятора gcc
- Код должен соответствовать Google Style Guide
- Решение оформляется как статическая библиотека `decimal.a` с заголовочным файлом `decimal.h`
- Необходимо обеспечить полное покрытие unit-тестами (не менее 80% каждой функции)
- Запрещено использование типа `__int128`
- Поддерживаемый диапазон чисел: от -79,228,162,514,264,337,593,543,950,335 до +79,228,162,514,264,337,593,543,950,335